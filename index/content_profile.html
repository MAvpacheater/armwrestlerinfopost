<!-- Profile Page - Fixed HTML —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ -->
<div class="page profile-page" id="profilePage">
    <!-- Include CSS -->
    <link rel="stylesheet" href="login/profile.css">
    
    <div class="profile-container">
        <!-- Profile Header -->
        <div class="profile-header">
            <div class="profile-avatar">
                <!-- –ó–ê–•–ò–©–ï–ù–ê –ê–í–ê–¢–ê–†–ö–ê - –ù–ï –ó–ú–Ü–ù–Æ–í–ê–¢–ò SRC! -->
                <img src="https://i.postimg.cc/gjmcXwV9/file-000000008fd461f4826bd65e36dbc3d2.png" 
                     alt="User Avatar" 
                     class="avatar-img" 
                     id="profileAvatar"
                     data-protected="true"
                     data-original-src="https://i.postimg.cc/gjmcXwV9/file-000000008fd461f4826bd65e36dbc3d2.png">
            </div>
            <div class="profile-info">
                <h2 class="profile-nickname" id="profileNickname">User</h2>
                <p class="profile-status">Lvl: 0 <span id="profileJoinDate">(Soon..)</span></p>
            </div>
        </div>

        <!-- Profile Actions -->
        <div class="profile-actions">
            <button class="action-btn settings-btn" onclick="toggleSettingsMenu()">
                <span class="btn-icon">‚öôÔ∏è</span>
                Settings
            </button>
            <button class="action-btn stats-btn" onclick="toggleStatsView()">
                <span class="btn-icon">üìä</span>
                Statistics
            </button>
            <button class="action-btn back-btn" onclick="goBackFromProfile()">
                <span class="btn-icon">‚Üê</span>
                Back
            </button>
        </div>

        <!-- Settings Menu -->
        <div class="settings-menu" id="settingsMenu" style="display: none;">
            <div class="settings-header">
                <h3>Settings</h3>
                <button class="close-btn" onclick="closeSettingsMenu()">√ó</button>
            </div>
            
            <div class="settings-options">
                <button class="settings-option-btn" onclick="showChangePassword()">
                    <span class="option-icon">üîí</span>
                    <div class="option-info">
                        <div class="option-title">Change Password</div>
                        <div class="option-desc">Update your account password</div>
                    </div>
                    <span class="option-arrow">‚Üí</span>
                </button>
                
                <button class="settings-option-btn" onclick="showChangeNickname()">
                    <span class="option-icon">‚úèÔ∏è</span>
                    <div class="option-info">
                        <div class="option-title">Change Nickname</div>
                        <div class="option-desc">Update your display name</div>
                    </div>
                    <span class="option-arrow">‚Üí</span>
                </button>
                
                <button class="settings-option-btn danger-option" onclick="confirmDeleteAccount()">
                    <span class="option-icon">‚ö†Ô∏è</span>
                    <div class="option-info">
                        <div class="option-title">Delete Account</div>
                        <div class="option-desc">Permanently delete your account</div>
                    </div>
                    <span class="option-arrow">‚Üí</span>
                </button>
            </div>
        </div>

        <!-- Change Password Form -->
        <div class="settings-form" id="changePasswordForm" style="display: none;">
            <div class="form-header">
                <button class="back-form-btn" onclick="backToSettingsMenu()">‚Üê</button>
                <h3>Change Password</h3>
                <button class="close-btn" onclick="closeSettingsMenu()">√ó</button>
            </div>
            
            <form onsubmit="handleChangePassword(event)">
                <div class="input-group">
                    <label for="currentPassword" class="input-label">Current Password (Optional for fallback mode)</label>
                    <input type="password" id="currentPassword" class="form-input" placeholder="Enter current password">
                </div>
                
                <div class="input-group">
                    <label for="newPassword" class="input-label">New Password</label>
                    <input type="password" id="newPassword" class="form-input" placeholder="Enter new password (min 6 chars)" required minlength="6">
                </div>
                
                <div class="input-group">
                    <label for="confirmNewPassword" class="input-label">Confirm New Password</label>
                    <input type="password" id="confirmNewPassword" class="form-input" placeholder="Confirm new password" required>
                </div>
                
                <button type="submit" class="submit-btn">Update Password</button>
            </form>
        </div>

        <!-- Change Nickname Form -->
        <div class="settings-form" id="changeNicknameForm" style="display: none;">
            <div class="form-header">
                <button class="back-form-btn" onclick="backToSettingsMenu()">‚Üê</button>
                <h3>Change Nickname</h3>
                <button class="close-btn" onclick="closeSettingsMenu()">√ó</button>
            </div>
            
            <form onsubmit="handleChangeNickname(event)">
                <div class="input-group">
                    <label for="currentNickname" class="input-label">Current Nickname</label>
                    <input type="text" id="currentNickname" class="form-input" readonly>
                </div>
                
                <div class="input-group">
                    <label for="newNickname" class="input-label">New Nickname</label>
                    <input type="text" id="newNickname" class="form-input" placeholder="Enter new nickname" required minlength="3" maxlength="20">
                </div>
                
                <button type="submit" class="submit-btn">Update Nickname</button>
            </form>
        </div>

        <!-- Statistics View -->
        <div class="stats-view" id="statsView" style="display: none;">
            <div class="stats-header">
                <h3>Statistics</h3>
                <button class="close-btn" onclick="closeStatsView()">√ó</button>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="loginCount">1</div>
                    <div class="stat-label">Total Logins</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="lastLoginDate">Today</div>
                    <div class="stat-label">Last Login</div>
                </div>
            </div>
        </div>

        <!-- Success/Error Messages -->
        <div class="profile-message" id="profileMessage"></div>
    </div>

    <!-- Avatar Protection Script -->
    <script>
        (function() {
            const protectAvatarQuick = () => {
                const avatar = document.getElementById('profileAvatar');
                if (avatar && !avatar.hasAttribute('data-quick-protected')) {
                    const originalSrc = 'https://i.postimg.cc/gjmcXwV9/file-000000008fd461f4826bd65e36dbc3d2.png';
                    avatar.src = originalSrc;
                    avatar.setAttribute('data-quick-protected', 'true');
                    console.log('‚ö° Quick avatar protection active');
                }
            };
            
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', protectAvatarQuick);
            } else {
                protectAvatarQuick();
            }
        })();
    </script>

    <!-- Include JavaScript files -->
    <script src="login/profile.js"></script>
    <script src="login/profile-open.js"></script>
    <script src="login/profile-settings.js"></script>
</div>
